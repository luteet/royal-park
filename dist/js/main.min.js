const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header"),imageBody=document.querySelectorAll(".image-body, figure");imageBody.forEach(e=>{const t=e.querySelector("img"),i=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==i.position&&(e.style.paddingTop=Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const aboutProjectContent=new Splide(".about-project__content",{perPage:1,gap:20,pagination:!1,arrows:!0});aboutProjectContent.mount();const gallerySlider=new Splide(".gallery__slider",{perPage:1,gap:30,pagination:!1,arrows:!0,speed:2e3,focus:"center",padding:"30vw",breakpoints:{992:{padding:"10vw",gap:16,speed:1e3},550:{gap:8}}});gallerySlider.mount();const galleryPopupSlider=new Splide(".gallery-popup__slider",{perPage:1,gap:30,pagination:!1,arrows:!0,speed:1e3,focus:"center",padding:"10vw",updateOnMove:!0,breakpoints:{992:{gap:16},550:{gap:8}}});galleryPopupSlider.mount();const expertsSlider=new Splide(".experts__slider",{perPage:1,gap:16,pagination:!1,arrows:!0,drag:!1});expertsSlider.on("mounted",(function(e){expertsSlider.root.classList.contains("is-overflow")&&(expertsSlider.options.drag=!0)})),expertsSlider.on("active",(function(e){e.slide.parentElement.style.height=e.slide.offsetHeight+"px"})),expertsSlider.mount();const locationSlider=new Splide(".location__slider",{perPage:2,heightRatio:1.35,pagination:!1,arrows:!0,gap:30,direction:"ttb",wheel:!0,drag:!1,breakpoints:{992:{direction:"ltr",gap:8,heightRatio:!1},768:{perPage:1,padding:{right:"15vw"}}}});locationSlider.on("mounted",(function(e){locationSlider.root.classList.contains("is-overflow")&&(locationSlider.options.drag=!0)})),locationSlider.mount();let windowSize=0;function resize(){html.style.setProperty("--height-header",header.offsetHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}resize(),window.addEventListener("resize",resize),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}t(".header__burger")&&menu.forEach(e=>{e.classList.toggle("_mob-menu-active")});const i=t(".about-project__video--preview");if(i){const e=i.parentElement,t=e.querySelector(".about-project__video--element");e.classList.add("_hidden"),setTimeout(()=>{t.play()},400)}const r=t(".gallery__filter button");if(r&&!r.classList.contains("current")){document.querySelector(".gallery__filter button.current")&&document.querySelector(".gallery__filter button.current").classList.remove("current"),r.classList.add("current");const e=r.closest("section").querySelector(".splide"),t=document.querySelector("#gallery-popup"),i=e.querySelectorAll(".gallery__slider--slide"),o=t.querySelectorAll(".gallery-popup__slider--slide");e.classList.add("_hidden"),setTimeout(()=>{i.forEach(e=>{e.dataset.category!=r.dataset.categoryTarget&&"all"!=r.dataset.categoryTarget?(e.classList.add("_hidden"),e.classList.remove("splide__slide")):(e.classList.remove("_hidden"),e.classList.add("splide__slide"))}),o.forEach(e=>{e.dataset.category!=r.dataset.categoryTarget&&"all"!=r.dataset.categoryTarget?(e.classList.add("_hidden"),e.classList.remove("splide__slide")):(e.classList.remove("_hidden"),e.classList.add("splide__slide"))}),gallerySlider.destroy(),gallerySlider.mount(),galleryPopupSlider.destroy(),galleryPopupSlider.mount(),setTimeout(()=>{e.classList.remove("_hidden")},200)},500)}const o=t(".experts__item:not(._active)");if(o){o.style.height=o.offsetHeight+"px";const e=document.querySelector(".experts__item._active");e.querySelector(".experts__item--text").style.paddingRight=windowSize>=1200?"67px":"35px",e.classList.remove("_active-end"),setTimeout(()=>{e.classList.remove("_active"),o.style.height="415px",o.classList.add("_active-start");const t=o.querySelector(".experts__item--text");setTimeout(()=>{o.classList.add("_active"),o.classList.remove("_active-start"),setTimeout(()=>{o.style.height=o.offsetHeight+"px",t.style.paddingRight=windowSize>=1200?"67px":"35px",setTimeout(()=>{windowSize>=1200?o.style.setProperty("height",t.offsetHeight+200+24+"px"):o.style.setProperty("height",t.offsetHeight+100+24+"px"),t.style.removeProperty("padding-right"),setTimeout(()=>{o.classList.add("_active-end"),o.style.removeProperty("height")},400)},0)},500)},200)},400)}if(t(".plan-filter__target")){document.querySelector(".plan-filter__popup").classList.add("_active"),body.classList.remove("_popup-active"),html.style.setProperty("--popup-padding",window.innerWidth-body.offsetWidth+"px"),body.classList.add("_popup-active")}(t(".plan-filter__popup--bg")||t(".plan-filter__popup--close"))&&(body.classList.remove("_popup-active"),html.style.setProperty("--popup-padding","0px"),document.querySelector(".plan-filter__popup").classList.remove("_active"));const n=t(".faq__question");if(n){n.parentElement.classList.toggle("_active")}let a=t(".scroll-to");if(a){let t;e.preventDefault(),t=!!a.getAttribute("href")&&document.querySelector(a.getAttribute("href")),menu.forEach(e=>{e.classList.remove("_mob-menu-active")}),t?t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):body.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}));const filter=document.querySelector(".plan-filter");if(filter){let e=new URL(document.URL),t=new URLSearchParams(e.search);filter.querySelectorAll(".plan-filter__sort-btn input").forEach(e=>{e.addEventListener("change",(function(i){t.set(e.name,e.value),history.pushState("","","?"+t.toString())}))});filter.querySelectorAll(".plan-filter__param-row--btn input").forEach(e=>{e.addEventListener("change",(function(i){"checkbox"==e.getAttribute("type")?e.checked?t.set(e.name,e.value):t.delete(e.name,e.value):t.set(e.name,e.value),history.pushState("","","?"+t.toString())}))});filter.querySelectorAll(".plan-filter__checkbox-list input").forEach(e=>{e.addEventListener("change",(function(i){e.checked?t.set(e.name,e.value):t.delete(e.name),history.pushState("","","?"+t.toString())}))});const i=document.querySelectorAll(".plan-filter__range"),r=filter.querySelector('[type="reset"]');i.forEach(e=>{const i=e.querySelector(".plan-filter__range--element"),o=e.querySelector(".plan-filter__range--min"),n=e.querySelector(".plan-filter__range--max");noUiSlider.create(i,{start:[t.get(i.dataset.name+"_min")?t.get(i.dataset.name+"_min"):i.dataset.min,t.get(i.dataset.name+"_max")?t.get(i.dataset.name+"_max"):i.dataset.max],connect:!0,step:1,range:{min:Number(i.dataset.min),max:Number(i.dataset.max)}}),i.noUiSlider.on("update",(function(e){o.textContent=Number(e[0]).toLocaleString("ru-RU"),n.textContent=Number(e[1]).toLocaleString("ru-RU")})),i.noUiSlider.on("change",(function(e){t.set(i.dataset.name+"_min",Math.round(Number(e[0]))),t.set(i.dataset.name+"_max",Math.round(Number(e[1]))),history.pushState("","","?"+t.toString())})),r.addEventListener("click",(function(e){i.noUiSlider.set([Number(i.dataset.min),Number(i.dataset.max)])}))}),r&&r.addEventListener("click",(function(i){filter.querySelectorAll("input:checked").forEach(e=>{e.checked=!1}),e.search="",history.pushState("","",e.href),e=new URL(document.URL),t=new URLSearchParams(e.search)}))}function Popup(e){let t=document.querySelector("body"),i=document.querySelector("html"),r="object"==typeof e&&!!e.saveHref,o=!0,n=!0;const a=function(e,n){if(o){o=!1;let a=document.querySelector(e);if(!a)return new Error(`Not found "${e}"`);a.classList.contains("popup")&&(t.classList.remove("_popup-active"),i.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),r&&history.pushState("","",e),a.style.display="flex","gallery-popup"==a.getAttribute("id")&&(galleryPopupSlider.options.speed=0,galleryPopupSlider.go(gallerySlider.index)),setTimeout(()=>{if(n)a.classList.add("_transition-none"),a.classList.add("_active"),o=!0;else{a.classList.add("_active"),galleryPopupSlider.options.speed=1e3,a.addEventListener("transitionend",(function e(){o=!0,a.classList.add("_active-end"),a.removeEventListener("transitionend",e)}))}},100))}},s=function(e){if(n){let o;n=!1,o="string"==typeof e?document.querySelector(e):e.closest(".popup"),o.classList.contains("_transition-none")&&o.classList.remove("_transition-none"),setTimeout(()=>{o.addEventListener("transitionend",(function e(){const a=document.querySelectorAll(".popup._active");a.length<1&&(t.classList.remove("_popup-active"),i.style.setProperty("--popup-padding","0px")),r&&(!function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}(),a[a.length-1]&&history.pushState("","","#"+a[a.length-1].getAttribute("id"))),n=!0,o.removeEventListener("transitionend",e),o.style.display="none"})),o.classList.remove("_active"),o.classList.remove("_active-end")},0)}};return{open:function(e){a(e)},close:function(e){s(e)},init:function(){let e;if(t.addEventListener("click",(function(t){e=t.target;let i=e.closest(".open-popup");i&&(t.preventDefault(),a(i.getAttribute("href")));let r=e.closest(".popup-close");r&&s(r)})),r){let e=new URL(window.location);e.hash&&a(e.hash,!0)}}}}const popup=new Popup;popup.init();